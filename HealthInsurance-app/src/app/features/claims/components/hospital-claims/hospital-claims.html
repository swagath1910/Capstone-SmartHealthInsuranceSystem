<mat-card>
  <mat-card-header>
    <mat-card-title>Hospital Claims Management</mat-card-title>
  </mat-card-header>
  
  <mat-card-content>
    <div *ngIf="isLoading" class="loading-container">
      <p>Loading claims...</p>
    </div>
    
    <div *ngIf="!isLoading && allClaims.length === 0" class="no-claims">
      <p>No claims assigned to this hospital.</p>
    </div>
    
    <table mat-table [dataSource]="allClaims" *ngIf="!isLoading && allClaims.length > 0">
      <ng-container matColumnDef="claimNumber">
        <th mat-header-cell *matHeaderCellDef>Claim Number</th>
        <td mat-cell *matCellDef="let claim">{{claim.claimNumber}}</td>
      </ng-container>
      
      <ng-container matColumnDef="patientName">
        <th mat-header-cell *matHeaderCellDef>Patient</th>
        <td mat-cell *matCellDef="let claim">{{claim.userName}}</td>
      </ng-container>
      
      <ng-container matColumnDef="claimAmount">
        <th mat-header-cell *matHeaderCellDef>Amount</th>
        <td mat-cell *matCellDef="let claim">â‚¹{{claim.claimAmount | number:'1.0-0'}}</td>
      </ng-container>
      
      <ng-container matColumnDef="submittedAt">
        <th mat-header-cell *matHeaderCellDef>Submitted</th>
        <td mat-cell *matCellDef="let claim">{{claim.submittedAt | date:'dd/MM/yyyy'}}</td>
      </ng-container>
      
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let claim">
          <span *ngIf="!claim.medicalNotes" class="status-pending">Pending Medical Notes</span>
          <span *ngIf="claim.medicalNotes" class="status-completed">Medical Notes Added</span>
        </td>
      </ng-container>
      
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let claim">
          <button mat-raised-button color="primary" 
                  *ngIf="!claim.medicalNotes"
                  (click)="addMedicalNotes(claim)">
            Add Medical Notes
          </button>
          <span *ngIf="claim.medicalNotes" class="completed-text">Completed</span>
        </td>
      </ng-container>
      
      <tr mat-header-row *matHeaderRowDef="allDisplayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: allDisplayedColumns;"></tr>
    </table>
  </mat-card-content>
</mat-card>

<!-- Medical Notes Dialog -->
<div *ngIf="showMedicalNotesDialog" class="dialog-overlay">
  <mat-card class="dialog-card">
    <mat-card-header>
      <mat-card-title>Add Medical Notes - {{selectedClaim?.claimNumber}}</mat-card-title>
    </mat-card-header>
    
    <mat-card-content>
      <form [formGroup]="medicalNotesForm" (ngSubmit)="submitMedicalNotes()">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Medical Notes</mat-label>
          <textarea matInput formControlName="medicalNotes" rows="6" required
                    placeholder="Enter detailed medical notes about the treatment..."></textarea>
          <mat-error *ngIf="medicalNotesForm.get('medicalNotes')?.hasError('required')">
            Medical notes are required
          </mat-error>
        </mat-form-field>
        
        <div class="form-actions">
          <button mat-button type="button" (click)="closeMedicalNotesDialog()">Cancel</button>
          <button mat-raised-button color="primary" type="submit" 
                  [disabled]="medicalNotesForm.invalid || isSubmitting">
            {{isSubmitting ? 'Submitting...' : 'Submit Notes'}}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>